## reids
### 개념
* Redis는 Remote Dictionary Server의 약자로 `NoSQL DBMS` 이다.

### 특징
* Redis는 `In-Memory` 기반이다.
  * 다른 DBMS는 `Disk`에 저장되지만 redis는 데이터들이 `Memory`에 저장된다.
  * redis는 디스크에 접근하지 않기 때문에 `read/write` 속도가 빠르다.
* `key`, `value`의 구조로 이루어져 있다.
* `collection`을 저장할 수 있는 기능이 있다.
  * RDBMS에서는 질의어를 수행해야 하기 때문에 속도가 느려지지만, redis는 자료구조를 저장하기 때문에 속도가 빠르고 편리하다.
* `cache` 방식을 사용한다.
  * 데이터를 `cache`에 저장해놓고 추가로 요청이 들어올 경우 저장된 값을 조회한다.
* `TTL` 지정이 가능하다.
  * TTL(Time to Live)를 사용함으로써 필요에 따라 데이터를 관리할 수 있다.

### 데이터 저장 방식
* redis는 `In-Memory` 방식이지만, 서버가 종료되더라도 데이터는 사라지지 않는다.
  * 데이터를 디스크에도 따로 저장하고 있어서 서버가 다운이 되더라도 데이터를 유지할 수 있다.(Persistance)

* 저장 방식 두 가지
  * `AOF(Append Only File)`
    * redis 명령어가 실행될 때 마다 명령이 파일에 기록되는 형식이다.
    * 명령이 수행되고 저장되는 사이에 서버가 다운된다면 데이터 손실이 발생할 수 있다.
    * 명령이 실행될 때 마다 파일의 사이즈가 계속 커지므로 OS 파일 사이즈 제한이 걸려 기록이 중단 될 수 있고, 서버 시작 시 로드가 지연될 수 있다.
      * `rewrite`를 통해 파일 데이터를 다시 써서 사이즈를 줄일 수 있다.
      * `AOP` 방식은 변경 이력이 모두 남지만 `rewrite`를 사용하면 최종 버전에 대한 정보만 기록한다.
  * `RDB(Redis Database)`
    * 실시간으로 명령이 파일에 저장되지 않고, 특정 시점에 메모리에 존재하는 데이터를 Binary 파일로 저장하는 방식이다.
    * 기본적으로 dump.rdb 파일에 기록되며, 명령어로는 `bgsave`, `save` 두 가지가 있다.
      * `bgsave`: 자식 프로세스에서 백그라운드로 수행하여 클라이언트 요청 처리가 가능하다.
      * `save`: 저장될 동안 클라이언트의 요청을 받을 수 없다.
    * 저장 시점은 `redis.conf`의 `save`로 설정한다.
      * `save 900 1`: 900초 동안 1번 이상 Key 변경 발생 시 저장.
      * `save 300 10`: 300초 동안 10번 이상 key 변경 발생 시 저장.
    * `AOP` 파일보다 사이즈가 작아서 읽을 때 속도가 더 빠르다.
